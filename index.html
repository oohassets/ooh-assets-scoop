<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SCOOP | OOH Assets Login</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
</head>
<body style="font-family:Arial;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;">

  <img src="https://oohassets.github.io/ooh-assets-scoop/icons/scoop_black_512x512.png" alt="SCOOP Logo" style="width:120px;margin-bottom:20px;">
  <h2>Login to Continue</h2>
  <input id="username" type="email" placeholder="Username" style="margin:5px;padding:10px;width:220px;">
  <input id="password" type="password" placeholder="Password" style="margin:5px;padding:10px;width:220px;">
  <button id="loginBtn" style="margin-top:10px;padding:10px 25px;">Login</button>
  <p id="loginMessage" style="color:#c00;"></p>

  <script>
  // --- Firebase Config ---
  const firebaseConfig = {
    apiKey: "AIzaSyCKH-qxF9rqJds8Oi69MA8zpoHB0BL_jlk",
    authDomain: "scoop-ooh-assets.firebaseapp.com",
    projectId: "scoop-ooh-assets",
    storageBucket: "scoop-ooh-assets.appspot.com",
    messagingSenderId: "611605892213",
    appId: "1:611605892213:web:d71dc48fec993b80f6bc3c"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // --- Already logged in? Go directly to home ---
  auth.onAuthStateChanged(user => {
    if (user) {
      window.location.href = "home.html";
    }
  });

  // --- Login function ---
  document.getElementById('loginBtn').addEventListener('click', async () => {
    const email = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    const msg = document.getElementById('loginMessage');

    if (!email || !password) {
      msg.textContent = "Please enter both fields.";
      return;
    }

    try {
      await auth.signInWithEmailAndPassword(email, password);
      msg.style.color = "green";
      msg.textContent = "Login successful!";
      window.location.href = "home.html";
    } catch (err) {
      console.error(err);
      msg.style.color = "#c00";
      if (err.code === 'auth/user-not-found') msg.textContent = 'User not found.';
      else if (err.code === 'auth/wrong-password') msg.textContent = 'Incorrect password.';
      else if (err.code === 'auth/invalid-email') msg.textContent = 'Invalid email.';
      else msg.textContent = err.message;
    }
  });
  </script>
</body>
</html>
